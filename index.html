<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teoria musicale interattiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: #f8fafc;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            border: 1px solid rgba(71, 85, 105, 0.3);
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 100% !important;
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                border: none !important;
                background: transparent !important;
                position: static !important;
            }
            
            .container > * {
                width: 100% !important;
                max-width: 100% !important;
                margin: 0 !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
            }
            
            body {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            }
            
            .header {
                border-radius: 0 !important;
                padding: 20px 15px !important;
                margin: 0 !important;
                width: 100% !important;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .level-mode-selector {
                border-radius: 0 !important;
                padding: 20px 15px !important;
                gap: 15px !important;
                margin: 0 !important;
                width: 100% !important;
            }
            
            .selector-group {
                gap: 8px;
            }
            
            .concept-card {
                margin: 10px 5px !important;
                padding: 15px !important;
                border-radius: 16px !important;
                width: calc(100% - 20px) !important;
            }
            
            .section {
                padding: 10px 5px !important;
                margin: 0 !important;
                width: 100% !important;
            }
            
            .level-content {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .piano-keyboard {
                transform: scale(0.8);
                transform-origin: center;
            }
            
            .footer {
                margin: 0 !important;
                border-radius: 0 !important;
                width: 100% !important;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .level-mode-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .concept-card {
                margin: 5px 2px !important;
                padding: 12px !important;
                border-radius: 12px !important;
                width: calc(100% - 10px) !important;
            }
            
            .section {
                padding: 5px 2px !important;
                width: 100% !important;
            }
            
            .footer {
                padding: 15px 10px;
            }
            
            .footer img {
                max-height: 50px;
            }
            
            .level-content {
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }
            
            * {
                box-sizing: border-box !important;
            }
            
            .container, .header, .level-mode-selector, .level-content, .section, .concept-card, .footer {
                box-sizing: border-box !important;
            }
        }

        .header {
            background: linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #059669 100%);
            padding: 40px 30px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .header h1 {
            font-size: 3.2em;
            margin-bottom: 15px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            font-weight: 800;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 300;
            position: relative;
            z-index: 1;
        }

        .level-mode-selector {
            display: flex;
            justify-content: center;
            background: rgba(51, 65, 85, 0.8);
            backdrop-filter: blur(10px);
            padding: 30px;
            gap: 25px;
            flex-wrap: wrap;
            border-bottom: 1px solid rgba(71, 85, 105, 0.3);
            position: relative;
        }

        .selector-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .selector-label {
            color: #cbd5e1;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.9;
        }

        .selector {
            background: rgba(71, 85, 105, 0.6);
            color: #f8fafc;
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-width: 220px;
            backdrop-filter: blur(10px);
            font-weight: 500;
        }

        .selector:hover {
            background: rgba(71, 85, 105, 0.8);
            border-color: rgba(30, 64, 175, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.2);
        }

        .volume-slider {
            width: 120px;
            height: 8px;
            background: rgba(71, 85, 105, 0.5);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #1e40af, #059669);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(30, 64, 175, 0.3);
        }

        .level-content {
            padding: 40px;
            min-height: 600px;
            background: rgba(15, 23, 42, 0.3);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-size: 2.2em;
            color: #f8fafc;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            border-radius: 16px;
            text-align: center;
            font-weight: 700;
            letter-spacing: -0.01em;
            box-shadow: 0 10px 30px rgba(30, 64, 175, 0.3);
            position: relative;
            overflow: hidden;
        }

        .concept-card {
            background: rgba(51, 65, 85, 0.8);
            backdrop-filter: blur(10px);
            border-left: 5px solid #1e40af;
            padding: 25px;
            margin: 25px 0;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 1px solid rgba(71, 85, 105, 0.3);
            position: relative;
            overflow: hidden;
        }



        .key {
            position: absolute;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 10px;
            font-weight: bold;
            border-radius: 0 0 8px 8px;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .white-key {
            width: 50px;
            height: 180px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            color: #1e293b;
            border: 2px solid rgba(71, 85, 105, 0.5);
            z-index: 1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .black-key {
            width: 34px;
            height: 120px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%);
            color: white;
            border: 2px solid rgba(15, 23, 42, 0.8);
            z-index: 2;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .key:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 64, 175, 0.3);
        }

        .key.pressed {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            transform: translateY(2px);
            box-shadow: 0 2px 8px rgba(30, 64, 175, 0.5);
        }

        .white-key.pressed {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
        }

        .btn {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            margin: 12px 8px;
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .feedback {
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            font-weight: 700;
            text-align: center;
            display: none;
            font-size: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .feedback.correct {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
            display: block;
            border-left: 6px solid #34d399;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            display: block;
            border-left: 6px solid #f87171;
        }

        .answer-btn, .answer-btn-5 {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: #f8fafc;
            border: 2px solid rgba(100, 116, 139, 0.3);
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 8px 6px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 140px;
        }

        .answer-btn:hover, .answer-btn-5:hover {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            border-color: rgba(30, 64, 175, 0.5);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.3);
            color: white;
        }

        .exercise-card {
            background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 15px 35px rgba(30, 64, 175, 0.3);
            position: relative;
            overflow: hidden;
        }

        .question-count-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(51, 65, 85, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(71, 85, 105, 0.3);
        }

        .question-count-selector select {
            background: rgba(71, 85, 105, 0.8);
            color: #f8fafc;
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 10px;
            padding: 10px 16px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .question-count-selector select:hover {
            border-color: rgba(30, 64, 175, 0.5);
            background: rgba(71, 85, 105, 1);
        }

        .question {
            background: rgba(51, 65, 85, 0.8);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            color: #f8fafc;
            border: 1px solid rgba(71, 85, 105, 0.3);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .game-mode-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(51, 65, 85, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(71, 85, 105, 0.3);
        }

        .game-mode-selector select {
            background: rgba(71, 85, 105, 0.8);
            color: #f8fafc;
            border: 2px solid rgba(100, 116, 139, 0.3);
            border-radius: 10px;
            padding: 10px 16px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .game-mode-selector select:hover {
            border-color: rgba(30, 64, 175, 0.5);
            background: rgba(71, 85, 105, 1);
        }

        @media (max-width: 768px) {
            .container {
                margin: 0;
                border-radius: 0;
                max-width: 100%;
                width: 100%;
                background: transparent;
            }
            
            body {
                padding: 0;
                background: linear-gradient(135deg, #1e40af 0%, #059669 100%);
            }

            .header h1 {
                font-size: 2.2em;
            }
            
            .header {
                border-radius: 0;
                padding: 20px 15px;
                margin: 0;
            }

            .level-mode-selector {
                flex-direction: column;
                gap: 15px;
                border-radius: 0;
                padding: 20px 15px;
                margin: 0;
            }

            .selector {
                min-width: 100%;
            }
            
            .level-content {
                padding: 10px 5px;
                margin: 0;
            }
            
            .concept-card {
                margin: 10px 5px;
                padding: 15px;
                border-radius: 16px;
            }
            
            .section {
                padding: 10px 5px;
                margin: 0;
            }

            .piano-keyboard {
                width: 100%;
                max-width: 350px;
            }
            
            /* Immagini di copertina a larghezza intera su mobile */
            .section img {
                max-width: 100% !important;
                width: 100% !important;
                height: auto !important;
                border-radius: 0 !important;
                margin: 0 !important;
                box-shadow: none !important;
            }
            
            /* Container delle immagini senza centratura */
            .section > div[style*="text-align: center"] {
                text-align: left !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            /* Tastiera mobile ottimizzata per Do finale aggiuntivo */
            .piano-keyboard {
                transform: scale(0.75) !important;
                transform-origin: center !important;
                max-width: 100% !important;
                overflow: hidden !important;
            }
            
            /* Note della tastiera ridimensionate per mobile */
            .key {
                transform: scale(0.9) !important;
            }
            
            .footer {
                margin: 0;
                border-radius: 0;
                padding: 20px 15px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Teoria musicale interattiva</h1>
        </div>

        <div class="level-mode-selector">
                        <div class="selector-group">
                <label class="selector-label">Livello</label>
                <select id="level-selector" class="selector">
                    <option value="1">Livello 1: distanze in musica</option>
                                <option value="2">Livello 2: alterazioni</option>
            <option value="3">Livello 3: intervalli</option>
            <option value="4">Livello 4: scale maggiori</option>
            <option value="5">Livello 5: tonalità</option>
            <option value="6">Livello 6: enarmonia</option>
                </select>
            </div>

            <div class="selector-group">
                <label class="selector-label">Modalità</label>
                <select id="mode-selector" class="selector">
                    <option value="theory">Teoria</option>
                    <option value="practice">Pratica</option>
                </select>
            </div>

            <div class="selector-group">
                <label class="selector-label">Volume del piano</label>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <input type="range" id="volume-control" min="0" max="100" value="20" class="volume-slider" style="width: 80px;">
                    <span id="volume-value" style="color: #e5e7eb; font-size: 12px; min-width: 35px;">20%</span>
                </div>
            </div>
        </div>

        <div class="level-content">
            <!-- LIVELLO 1 - TEORIA -->
            <div id="level-1-theory" class="section active">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="Distanze in musica.jpeg" alt="Distanze in musica" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>🎵 Che cosa sono le distanze in musica?</h3>
                    <p>In musica misuriamo le distanze tra le note con <strong>toni</strong> e <strong>semitoni</strong>. Queste sono le unità fondamentali per misurare gli intervalli musicali, comporre le scale e dare una forma alla musica.</p>
                </div>

                <div class="concept-card">
                    <h3>🎹 Il semitono</h3>
                    <p>Il <strong>semitono</strong> è la distanza più piccola fra due note, nella musica occidentale.</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempi di semitoni:</strong><br>
                        • Do → Do# (tasto bianco → tasto nero adiacente)<br>
                        • Mi → Fa (tasto bianco → tasto bianco adiacente)<br>
                        • Si → Do (tasto bianco → tasto bianco adiacente)<br>
                        <p>Osserva queste distanze sulla tastiera, e prova a percorrerle ripetendo "semitono" dopo aver pronunciato il nome delle note. <br>Per esempio: Do-Do# (le osservi o suoni sulla tastiera): semitono; Mi-Fa (osservale sulla tastiera): semitono. </p>
                    </div>
                    <p><strong>Importante:</strong> Tra Mi e Fa, e tra Si e Do, c'è solo un semitono (nessun tasto nero in mezzo) ed è l'unico caso in cui due note bianche contigue formano la distanza di un semitono e non di un tono.</p>
                </div>

                <div class="concept-card">
                    <h3>🎵 Il tono</h3>
                    <p>Il <strong>tono</strong> è formato da due semitoni:</p>
                    <div style="background: #2563eb; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempi di toni:</strong><br>
                        • Do → Re (Do → Do# → Re = 2 semitoni)<br>
                        • Re → Mi (Re → Re# → Mi = 2 semitoni)<br>
                        • Fa → Sol (Fa → Fa# → Sol = 2 semitoni)<br>
                        • Sol → La (Sol → Sol# → La = 2 semitoni)<br>
                        • La → Si (La → La# → Si = 2 semitoni)<br>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>🎯 Memorizza utilizzando la tastiera.</h3>
                    <p>Usa la tastiera per sperimentare:</p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>Semitoni:</strong> Do → Do#, Mi → Fa, Si → Do</li>
                        <li><strong>Toni:</strong> Do → Re, Re → Mi, Fa → Sol, Sol → La, La → Si</li>
                    </ul>
                    <p><strong>Suggerimento:</strong> Ascolta la differenza di suono tra un semitono e un tono!</p>
                </div>

                <!-- TASTIERA LIVELLO 1 TEORIA - DOPPIA OTTAVA -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>
            </div>

            <!-- LIVELLO 1 - PRATICA -->
            <div id="level-1-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Esercizi sui semitoni e toni</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-1" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-1">Gioca</button>
                    
                    <div id="question-1" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <!-- TASTIERA LIVELLO 1 PRATICA - DOPPIA OTTAVA CON DO FINALE -->
                    <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                        <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                            <!-- Prima ottava -->
                            <div class="key white-key practice-key" style="left: 0px;" data-note="Do"></div>
                            <div class="key white-key practice-key" style="left: 50px;" data-note="Re"></div>
                            <div class="key white-key practice-key" style="left: 100px;" data-note="Mi"></div>
                            <div class="key white-key practice-key" style="left: 150px;" data-note="Fa"></div>
                            <div class="key white-key practice-key" style="left: 200px;" data-note="Sol"></div>
                            <div class="key white-key practice-key" style="left: 250px;" data-note="La"></div>
                            <div class="key white-key practice-key" style="left: 300px;" data-note="Si"></div>
                            
                            <div class="key black-key practice-key" style="left: 32px;" data-note="Do#"></div>
                            <div class="key black-key practice-key" style="left: 82px;" data-note="Re#"></div>
                            <div class="key black-key practice-key" style="left: 182px;" data-note="Fa#"></div>
                            <div class="key black-key practice-key" style="left: 232px;" data-note="Sol#"></div>
                            <div class="key black-key practice-key" style="left: 282px;" data-note="La#"></div>
                            
                            <!-- Seconda ottava -->
                            <div class="key white-key practice-key" style="left: 350px;" data-note="Do2"></div>
                            <div class="key white-key practice-key" style="left: 400px;" data-note="Re2"></div>
                            <div class="key white-key practice-key" style="left: 450px;" data-note="Mi2"></div>
                            <div class="key white-key practice-key" style="left: 500px;" data-note="Fa2"></div>
                            <div class="key white-key practice-key" style="left: 550px;" data-note="Sol2"></div>
                            <div class="key white-key practice-key" style="left: 600px;" data-note="La2"></div>
                            <div class="key white-key practice-key" style="left: 650px;" data-note="Si2"></div>
                            
                            <div class="key black-key practice-key" style="left: 382px;" data-note="Do#2"></div>
                            <div class="key black-key practice-key" style="left: 432px;" data-note="Re#2"></div>
                            <div class="key black-key practice-key" style="left: 532px;" data-note="Fa#2"></div>
                            <div class="key black-key practice-key" style="left: 582px;" data-note="Sol#2"></div>
                            <div class="key black-key practice-key" style="left: 632px;" data-note="La#2"></div>
                            
                            <!-- Do finale (terza ottava) -->
                            <div class="key white-key practice-key" style="left: 700px;" data-note="Do3"></div>
                        </div>
                    </div>
                    
                    <div id="feedback-1" class="feedback"></div>
                </div>
            </div>

            <!-- LIVELLO 2 - TEORIA -->
            <div id="level-2-theory" class="section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="alterazioni.jpg" alt="Le alterazioni musicali" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>🎵 Che cosa sono le alterazioni?</h3>
                    <p>Le <strong>alterazioni</strong> sono simboli che modificano l'altezza delle note. Permettono di creare note che non esistono nella scala naturale di Do maggiore.</p>
                </div>

                <div class="concept-card">
                    <h3>♯ Il diesis</h3>
                    <p>Il <strong>diesis</strong> (♯) innalza la nota di un semitono:</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempi di diesis:</strong><br>
                        • Do♯ = Do innalzato di un semitono<br>
                        • Re♯ = Re innalzato di un semitono<br>
                        • Fa♯ = Fa innalzato di un semitono<br>
                        • Sol♯ = Sol innalzato di un semitono<br>
                        • La♯ = La innalzato di un semitono
                    </div>
                </div>

                <div class="concept-card">
                    <h3>♭ Il bemolle</h3>
                    <p>Il <strong>bemolle</strong> (♭) abbassa la nota di un semitono.</p>
                    <div style="background: #3730a3; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempi di bemolli:</strong><br>
                        • Si♭ = Si abbassato di un semitono<br>
                        • Mi♭ = Mi abbassato di un semitono<br>
                        • La♭ = La abbassato di un semitono<br>
                        • Re♭ = Re abbassato di un semitono<br>
                        • Sol♭ = Sol abbassato di un semitono
                    </div>
                    <p><strong>Nota importante:</strong> Si♭ e La♯ sono la stessa nota (enarmoniche).</p>
                </div>

                <div class="concept-card">
                    <h3>♮ Il bequadro</h3>
                    <p>Il <strong>bequadro</strong> (♮) annulla l'effetto di un diesis o di un bemolle</p>
                    <div style="background: #334155; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempi di bequadro:</strong><br>
                        • Do♯♮ = Do naturale (annulla il diesis)<br>
                        • Si♭♮ = Si naturale (annulla il bemolle)<br>
                        • Fa♯♮ = Fa naturale (annulla il diesis)
                    </div>
                    <p><strong>Regola pratica:</strong> il bequadro riporta la nota alla sua forma naturale.</p>
                </div>

                <div class="concept-card">
                    <h3>🎹 Prova a percorrere la tastiera verso destra dicendo:</h3>
                    <p>Do, poi prosegui sul tasto nero successivo e dirai Do♯, Re, Re♯, Mi, Fa, Fa♯, Sol, Sol♯, La, La♯, Si, Do</p>
                    <p><strong>Tornando indietro dirai il nome dei bemolli:</strong></p>
                    <p>Si, Si♭, La, La♭, Sol, Sol♭, Fa, Mi, Mi♭, Re, Re♭, Do</p><br>
                    <p>Come Hai visto, i tasti neri possono avere due identità: diesis o bemolle, a seconda della nota di riferimento. Questo concetto si chiama "enarmonia": stesso suono, ma nome diverso. Approfondiremo nell'ultimo livello,</p>
                </div>

                <!-- TASTIERA LIVELLO 2 TEORIA - DOPPIA OTTAVA CON DO FINALE -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>
            </div>

            <!-- LIVELLO 2 - PRATICA -->
            <div id="level-2-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Suona le note con alterazioni</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-2" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-2">Gioca</button>
                    
                    <div id="question-2" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <!-- TASTIERA LIVELLO 2 PRATICA - DOPPIA OTTAVA CON DO FINALE -->
                    <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                        <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                            <!-- Prima ottava -->
                            <div class="key white-key practice-key" style="left: 0px;" data-note="Do"></div>
                            <div class="key white-key practice-key" style="left: 50px;" data-note="Re"></div>
                            <div class="key white-key practice-key" style="left: 100px;" data-note="Mi"></div>
                            <div class="key white-key practice-key" style="left: 150px;" data-note="Fa"></div>
                            <div class="key white-key practice-key" style="left: 200px;" data-note="Sol"></div>
                            <div class="key white-key practice-key" style="left: 250px;" data-note="La"></div>
                            <div class="key white-key practice-key" style="left: 300px;" data-note="Si"></div>
                            
                            <div class="key black-key practice-key" style="left: 32px;" data-note="Do#"></div>
                            <div class="key black-key practice-key" style="left: 82px;" data-note="Re#"></div>
                            <div class="key black-key practice-key" style="left: 182px;" data-note="Fa#"></div>
                            <div class="key black-key practice-key" style="left: 232px;" data-note="Sol#"></div>
                            <div class="key black-key practice-key" style="left: 282px;" data-note="La#"></div>
                            
                            <!-- Seconda ottava -->
                            <div class="key white-key practice-key" style="left: 350px;" data-note="Do2"></div>
                            <div class="key white-key practice-key" style="left: 400px;" data-note="Re2"></div>
                            <div class="key white-key practice-key" style="left: 450px;" data-note="Mi2"></div>
                            <div class="key white-key practice-key" style="left: 500px;" data-note="Fa2"></div>
                            <div class="key white-key practice-key" style="left: 550px;" data-note="Sol2"></div>
                            <div class="key white-key practice-key" style="left: 600px;" data-note="La2"></div>
                            <div class="key white-key practice-key" style="left: 650px;" data-note="Si2"></div>
                            
                            <div class="key black-key practice-key" style="left: 382px;" data-note="Do#2"></div>
                            <div class="key black-key practice-key" style="left: 432px;" data-note="Re#2"></div>
                            <div class="key black-key practice-key" style="left: 532px;" data-note="Fa#2"></div>
                            <div class="key black-key practice-key" style="left: 582px;" data-note="Sol#2"></div>
                            <div class="key black-key practice-key" style="left: 632px;" data-note="La#2"></div>
                            
                            <!-- Do finale (terza ottava) -->
                            <div class="key white-key practice-key" style="left: 700px;" data-note="Do3"></div>
                        </div>
                    </div>
                    
                    <div id="feedback-2" class="feedback"></div>
                </div>
            </div>

            <!-- LIVELLO 3 - TEORIA -->
            <div id="level-3-theory" class="section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="Intervalli.jpg" alt="Gli intervalli musicali" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>🎵 Che cosa sono gli intervalli?</h3>
                    <p>Gli <strong>intervalli</strong> sono le distanze tra due note musicali. Ogni intervallo ha un nome specifico che indica quante note della scala separano le due note.</p>
                </div>

                <div class="concept-card">
                    <h3>🎯 Nomenclatura degli intervalli</h3>
                    <p>Gli intervalli si chiamano contando le note della scala di Do maggiore:</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Scala di Do:</strong> Do - Re - Mi - Fa - Sol - La - Si - Do<br>
                        <small>1° - 2° - 3° - 4° - 5° - 6° - 7° - 8°</small>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>📏 Esempi pratici</h3>
                    <div style="background: #2563eb; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Da Do a Re:</strong> 2° (seconda)<br>
                        <strong>Da Do a Mi:</strong> 3° (terza)<br>
                        <strong>Da Do a Fa:</strong> 4° (quarta)<br>
                        <strong>Da Do a Sol:</strong> 5° (quinta)<br>
                        <strong>Da Do a La:</strong> 6° (sesta)<br>
                        <strong>Da Do a Si:</strong> 7° (settima)<br>
                        <strong>Da Do a Do:</strong> 8° (ottava)
                    </div>
                </div>

                <div class="concept-card">
                    <h3>🎹 Prova tu sulla tastiera!</h3>
                    <p>Usa la tastiera sopra per sperimentare:</p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>Seconda:</strong> Do → Re (2 note: Do, Re)</li>
                        <li><strong>Terza:</strong> Do → Mi (3 note: Do, Re, Mi)</li>
                        <li><strong>Quarta:</strong> Do → Fa (4 note: Do, Re, Mi, Fa)</li>
                        <li><strong>Quinta:</strong> Do → Sol (5 note: Do, Re, Mi, Fa, Sol)</li>
                    </ul>
                    <p><strong>Suggerimento:</strong> Conta le note che passi sulla tastiera per identificare l'intervallo!</p>
                </div>

                <!-- TASTIERA LIVELLO 3 TEORIA - DOPPIA OTTAVA CON DO FINALE -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>
            </div>

            <!-- LIVELLO 3 - PRATICA -->
            <div id="level-3-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Riconosci gli intervalli</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-3" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-3">Gioca</button>
                    
                    <div id="question-3" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong>Istruzioni:</strong> Suona le due note e identifica l'intervallo tra di esse.<br>
                        
                    </div>
                    
                    <!-- TASTIERA LIVELLO 3 PRATICA - DOPPIA OTTAVA CON DO FINALE -->
                    <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                        <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                            <!-- Prima ottava -->
                            <div class="key white-key practice-key" style="left: 0px;" data-note="Do"></div>
                            <div class="key white-key practice-key" style="left: 50px;" data-note="Re"></div>
                            <div class="key white-key practice-key" style="left: 100px;" data-note="Mi"></div>
                            <div class="key white-key practice-key" style="left: 150px;" data-note="Fa"></div>
                            <div class="key white-key practice-key" style="left: 200px;" data-note="Sol"></div>
                            <div class="key white-key practice-key" style="left: 250px;" data-note="La"></div>
                            <div class="key white-key practice-key" style="left: 300px;" data-note="Si"></div>
                            
                            <div class="key black-key practice-key" style="left: 32px;" data-note="Do#"></div>
                            <div class="key black-key practice-key" style="left: 82px;" data-note="Re#"></div>
                            <div class="key black-key practice-key" style="left: 182px;" data-note="Fa#"></div>
                            <div class="key black-key practice-key" style="left: 232px;" data-note="Sol#"></div>
                            <div class="key black-key practice-key" style="left: 282px;" data-note="La#"></div>
                            
                            <!-- Seconda ottava -->
                            <div class="key white-key practice-key" style="left: 350px;" data-note="Do2"></div>
                            <div class="key white-key practice-key" style="left: 400px;" data-note="Re2"></div>
                            <div class="key white-key practice-key" style="left: 450px;" data-note="Mi2"></div>
                            <div class="key white-key practice-key" style="left: 500px;" data-note="Fa2"></div>
                            <div class="key white-key practice-key" style="left: 550px;" data-note="Sol2"></div>
                            <div class="key white-key practice-key" style="left: 600px;" data-note="La2"></div>
                            <div class="key white-key practice-key" style="left: 650px;" data-note="Si2"></div>
                            
                            <div class="key black-key practice-key" style="left: 382px;" data-note="Do#2"></div>
                            <div class="key black-key practice-key" style="left: 432px;" data-note="Re#2"></div>
                            <div class="key black-key practice-key" style="left: 532px;" data-note="Fa#2"></div>
                            <div class="key black-key practice-key" style="left: 582px;" data-note="Sol#2"></div>
                            <div class="key black-key practice-key" style="left: 632px;" data-note="La#2"></div>
                            
                            <!-- Do finale (terza ottava) -->
                            <div class="key white-key practice-key" style="left: 700px;" data-note="Do3"></div>
                        </div>
                    </div>
                    
                    <div id="answer-buttons-3" style="display: none;">
                        <button class="answer-btn" data-interval="2">2° (seconda)</button>
                        <button class="answer-btn" data-interval="3">3° (terza)</button>
                        <button class="answer-btn" data-interval="4">4° (quarta)</button>
                        <button class="answer-btn" data-interval="5">5° (quinta)</button>
                        <button class="answer-btn" data-interval="6">6° (sesta)</button>
                        <button class="answer-btn" data-interval="7">7° (settima)</button>
                        <button class="answer-btn" data-interval="8">8° (ottava)</button>
                    </div>
                    
                    <div id="feedback-3" class="feedback"></div>
                </div>
            </div>

            <!-- LIVELLO 4 - TEORIA -->
            <div id="level-4-theory" class="section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="Scale maggiori.jpg" alt="Le scale maggiori" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>Che cos'è una scala maggiore?</h3>
                    <p>Una scala maggiore è una successione di 8 note che seguono sempre lo stesso schema di <strong>toni e semitoni</strong>:</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
                        <strong>TONO - TONO - SEMITONO - TONO - TONO - TONO - SEMITONO</strong><br>
                        <small>T - T - S - T - T - T - S</small>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>Esempio: Scala di Do maggiore</h3>
                    <p>Partiamo da Do e applichiamo la formula:</p>
                    <div style="background: #3730a3; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Do</strong> +(T)→ <strong>Re</strong> +(T)→ <strong>Mi</strong> +(S)→ <strong>Fa</strong> +(T)→ <strong>Sol</strong> +(T)→ <strong>La</strong> +(T)→ <strong>Si</strong> +(S)→ <strong>Do</strong><br>
                        <small>Tutte note bianche! Nessuna alterazione.</small>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>Scale con alterazioni in chiave</h3>
                    <p>Partendo da altre note, la formula T-T-S-T-T-T-S richiede alterazioni:</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Sol maggiore:</strong> Sol - La - Si - Do - Re - Mi - <strong>Fa#</strong> - Sol<br>
                        <strong>Fa maggiore:</strong> Fa - Sol - La - <strong>Si♭</strong> - Do - Re - Mi - Fa<br>
                        <strong>Re maggiore:</strong> Re - Mi - <strong>Fa#</strong> - Sol - La - Si - <strong>Do#</strong> - Re
                    </div>
                </div>

                <!-- TASTIERA LIVELLO 3 TEORIA - DOPPIA OTTAVA CON DO FINALE -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>Prova tu!</h3>
                    <p>Usa la tastiera sopra per suonare queste scale:</p>
                    <p><strong>Do maggiore:</strong> Do - Re - Mi - Fa - Sol - La - Si - Do</p>
                    <p><strong>Sol maggiore:</strong> Sol - La - Si - Do - Re - Mi - Fa# - Sol</p>
                    <p><strong>Fa maggiore:</strong> Fa - Sol - La - Si♭ - Do - Re - Mi - Fa</p>
                </div>
            </div>

            <!-- LIVELLO 4 - PRATICA -->
            <div id="level-4-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Costruisci le scale maggiori</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-4" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-4">Gioca</button>
                    
                    <div id="question-4" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong>Istruzioni:</strong> Suona tutte le 8 note della scala richiesta nell'ordine corretto.<br>
                        <small>Ricorda: T-T-S-T-T-T-S (Tono-Tono-Semitono-Tono-Tono-Tono-Semitono)</small>
                    </div>
                    
                    <!-- TASTIERA LIVELLO 4 PRATICA - DOPPIA OTTAVA CON DO FINALE -->
                    <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                        <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                            <!-- Prima ottava -->
                            <div class="key white-key practice-key" style="left: 0px;" data-note="Do"></div>
                            <div class="key white-key practice-key" style="left: 50px;" data-note="Re"></div>
                            <div class="key white-key practice-key" style="left: 100px;" data-note="Mi"></div>
                            <div class="key white-key practice-key" style="left: 150px;" data-note="Fa"></div>
                            <div class="key white-key practice-key" style="left: 200px;" data-note="Sol"></div>
                            <div class="key white-key practice-key" style="left: 250px;" data-note="La"></div>
                            <div class="key white-key practice-key" style="left: 300px;" data-note="Si"></div>
                            
                            <div class="key black-key practice-key" style="left: 32px;" data-note="Do#"></div>
                            <div class="key black-key practice-key" style="left: 82px;" data-note="Re#"></div>
                            <div class="key black-key practice-key" style="left: 182px;" data-note="Fa#"></div>
                            <div class="key black-key practice-key" style="left: 232px;" data-note="Sol#"></div>
                            <div class="key black-key practice-key" style="left: 282px;" data-note="La#"></div>
                            
                            <!-- Seconda ottava -->
                            <div class="key white-key practice-key" style="left: 350px;" data-note="Do2"></div>
                            <div class="key white-key practice-key" style="left: 400px;" data-note="Re2"></div>
                            <div class="key white-key practice-key" style="left: 450px;" data-note="Mi2"></div>
                            <div class="key white-key practice-key" style="left: 500px;" data-note="Fa2"></div>
                            <div class="key white-key practice-key" style="left: 550px;" data-note="Sol2"></div>
                            <div class="key white-key practice-key" style="left: 600px;" data-note="La2"></div>
                            <div class="key white-key practice-key" style="left: 650px;" data-note="Si2"></div>
                            
                            <div class="key black-key practice-key" style="left: 382px;" data-note="Do#2"></div>
                            <div class="key black-key practice-key" style="left: 432px;" data-note="Re#2"></div>
                            <div class="key black-key practice-key" style="left: 532px;" data-note="Fa#2"></div>
                            <div class="key black-key practice-key" style="left: 582px;" data-note="Sol#2"></div>
                            <div class="key black-key practice-key" style="left: 632px;" data-note="La#2"></div>
                            
                            <!-- Do finale (terza ottava) -->
                            <div class="key white-key practice-key" style="left: 700px;" data-note="Do3"></div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0; text-align: center;">
                        <div style="background: #334155; padding: 10px; border-radius: 8px; display: inline-block;">
                            <strong>Note suonate:</strong> <span id="played-notes-4" style="color: #3b82f6;">-</span>
                        </div>
                    </div>
                    
                    <div id="feedback-4" class="feedback"></div>
                    
                    <button class="btn" id="reset-scale-4" style="background: #64748b;">Ricomincia Scala</button>
                </div>
            </div>

            <!-- LIVELLO 5 - TEORIA -->
            <div id="level-5-theory" class="section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="tonalita.jpg" alt="Le tonalità musicali" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>Che cos'è una tonalità?</h3>
                    <p>Una tonalità è l'insieme di note che appartengono a una scala maggiore, con le sue <strong>alterazioni in chiave</strong> che si applicano a tutto il brano musicale.</p>
                </div>

                <div class="concept-card">
                    <h3>Ordine delle alterazioni</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #1e40af; padding: 15px; border-radius: 10px;">
                            <h4 style="color: #bfdbfe;">Diesis (#)</h4>
                            <p><strong>Fa# - Do# - Sol# - Re# - La# - Mi# - Si#</strong></p>
                            <small>Ricorda: "Fa Do Sol Re La Mi Si"</small>
                        </div>
                        <div style="background: #3730a3; padding: 15px; border-radius: 10px;">
                            <h4 style="color: #c7d2fe;">Bemolle (♭)</h4>
                            <p><strong>Si♭ - Mi♭ - La♭ - Re♭ - Sol♭ - Do♭ - Fa♭</strong></p>
                            <small>Ordine inverso dei diesis</small>
                        </div>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>Tonalità principali</h3>
                    <div style="background: #334155; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <p><strong>Nessuna alterazione:</strong> Do maggiore</p>
                        <p><strong>1 diesis (Fa#):</strong> Sol maggiore</p>
                        <p><strong>2 diesis (Fa#, Do#):</strong> Re maggiore</p>
                        <p><strong>3 diesis (Fa#, Do#, Sol#):</strong> La maggiore</p>
                        <p><strong>1 bemolle (Si♭):</strong> Fa maggiore</p>
                        <p><strong>2 bemolli (Si♭, Mi♭):</strong> Si♭ maggiore</p>
                        <p><strong>3 bemolli (Si♭, Mi♭, La♭):</strong> Mi♭ maggiore</p>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>Circolo delle quinte</h3>
                    <p>Le tonalità sono collegate in un cerchio: ogni nuova tonalità dista una quinta dalla precedente.</p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
                        <strong>Do → Sol → Re → La → Mi → Si → Fa# → Do#</strong><br>
                        <small>(Senso orario: aggiungiamo diesis)</small><br><br>
                        <strong>Do ← Fa ← Si♭ ← Mi♭ ← La♭ ← Re♭ ← Sol♭ ← Do♭</strong><br>
                        <small>(Senso antiorario: aggiungiamo bemolli)</small>
                    </div>
                </div>

                <!-- TASTIERA LIVELLO 5 TEORIA - DOPPIA OTTAVA CON DO FINALE -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>
            </div>

            <!-- LIVELLO 5 - PRATICA -->
            <div id="level-5-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Riconosci le tonalità</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-5" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-5">Gioca</button>
                    
                    <div id="question-5" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <div style="margin: 20px 0;">
                        <label class="selector-label">Modalità di gioco:</label>
                        <select id="game-mode-5" class="selector" style="min-width: 150px;">
                                                    <option value="tonality-to-alterations">Modalità A: Tonalità → alterazioni</option>
                        <option value="alterations-to-tonality">Modalità B: Alterazioni → tonalità</option>
                        </select>
                    </div>
                    
                    <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong>Modalità A:</strong> Data una tonalità, indica le sue alterazioni in chiave<br>
                        <strong>Modalità B:</strong> Date le alterazioni in chiave, indica la tonalità<br>
                        <small>Es. "Sol maggiore" → "1 diesis: Fa#" oppure "2 bemolli" → "Si♭ maggiore"</small>
                    </div>
                    
                    <div id="tonality-info-5" style="background: #334155; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; display: none;">
                        <div id="tonality-display-5" style="font-size: 1.2em; color: #3b82f6; margin-bottom: 10px;"></div>
                        <div id="alterations-display-5" style="color: #e2e8f0;"></div>
                    </div>
                    
                    <!-- Pulsanti per le risposte -->
                    <div id="answer-buttons-5" style="display: none;">
                        <!-- I pulsanti vengono generati dinamicamente in base alla modalità -->
                    </div>
                    
                    <div id="feedback-5" class="feedback"></div>
                </div>
            </div>

            <!-- LIVELLO 6 - TEORIA -->
            <div id="level-6-theory" class="section">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="enarmonia.jpg" alt="L'enarmonia musicale" style="max-width: 50%; height: auto; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                </div>
                
                <div class="concept-card">
                    <h3>🎼 Cosa significa "enarmonico"?</h3>
                    <p>In alcuni accordi potresti trovare la dicitura "enarmonico" al posto delle singole note che lo compongono.</p>
                    <p><strong>👉 Questo accade quando l'accordo ha lo stesso suono di un altro, ma con un nome diverso.</strong></p>
                    <div style="background: #1e40af; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Esempio:</strong> Si♭ maggiore e La♯ maggiore suonano uguali<br>
                        <small>Ma solo Si♭ maggiore è considerato corretto, perché La♯ maggiore non esiste come tonalità ufficiale</small>
                    </div>
                    <p><strong>📝 In questi casi si scrive "enarmonico", per evitare di usare nomi non riconosciuti nelle armature di chiave.</strong></p>
                </div>

                <div class="concept-card">
                    <h3>🎼 Tonalità esistenti (ordinate per numero di alterazioni)</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #1e40af; padding: 15px; border-radius: 10px;">
                            <h4 style="color: #bfdbfe;">🔵 Tonalità con diesis (#)</h4>
                            <div style="font-size: 14px; line-height: 1.6;">
                                <p><strong>0:</strong> Do, La minore</p>
                                <p><strong>1 ♯:</strong> Sol, Mi minore (Fa♯)</p>
                                <p><strong>2 ♯:</strong> Re, Si minore (Fa♯, Do♯)</p>
                                <p><strong>3 ♯:</strong> La, Fa♯ minore (Fa♯, Do♯, Sol♯)</p>
                                <p><strong>4 ♯:</strong> Mi, Do♯ minore (Fa♯, Do♯, Sol♯, Re♯)</p>
                                <p><strong>5 ♯:</strong> Si, Sol♯ minore (Fa♯, Do♯, Sol♯, Re♯, La♯)</p>
                                <p><strong>6 ♯:</strong> Fa♯, Re♯ minore (Fa♯, Do♯, Sol♯, Re♯, La♯, Mi♯)</p>
                                <p><strong>7 ♯:</strong> Do♯, La♯ minore* (Fa♯, Do♯, Sol♯, Re♯, La♯, Mi♯, Si♯)</p>
                                <small>*La♯ minore esiste teoricamente ma si evita per difficoltà di lettura: si usa Si♭ minore.</small>
                            </div>
                        </div>
                        
                        <div style="background: #3730a3; padding: 15px; border-radius: 10px;">
                            <h4 style="color: #c7d2fe;">🔴 Tonalità con bemolli (♭)</h4>
                            <div style="font-size: 14px; line-height: 1.6;">
                                <p><strong>1 ♭:</strong> Fa, Re minore (Si♭)</p>
                                <p><strong>2 ♭:</strong> Si♭, Sol minore (Si♭, Mi♭)</p>
                                <p><strong>3 ♭:</strong> Mi♭, Do minore (Si♭, Mi♭, La♭)</p>
                                <p><strong>4 ♭:</strong> La♭, Fa minore (Si♭, Mi♭, La♭, Re♭)</p>
                                <p><strong>5 ♭:</strong> Re♭, Si♭ minore (Si♭, Mi♭, La♭, Re♭, Sol♭)</p>
                                <p><strong>6 ♭:</strong> Sol♭, Mi♭ minore (Si♭, Mi♭, La♭, Re♭, Sol♭, Do♭)</p>
                                <p><strong>7 ♭:</strong> Do♭, La♭ minore (Si♭, Mi♭, La♭, Re♭, Sol♭, Do♭, Fa♭)</p>
                                <small>📍 Le tonalità oltre 6 o 7 alterazioni non si usano nella pratica: si preferisce la loro forma enarmonica.</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="concept-card">
                    <h3>📝 Esempi di Enarmonia</h3>
                    <div style="background: #334155; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <p><strong>Do♭ maggiore => meglio usare Si maggiore</strong></p>
                        <p>Questo perché:</p>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Do♭ maggiore avrebbe 7 bemolli</li>
                            <li>Si maggiore ha solo 5 diesis: Fa♯, Do♯, Sol♯, Re♯, La♯</li>
                            <li><strong>✅ Si preferisce Si maggiore</strong></li>
                        </ul>
                        
                        <p><strong>Do♯ maggiore => meglio usare Re♭ maggiore</strong></p>
                        <p>Questo perché:</p>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Do♯ maggiore richiederebbe 7 diesis</li>
                            <li>Re♭ maggiore ha solo 5 bemolli</li>
                            <li><strong>✅ Si preferisce Re♭ maggiore</strong></li>
                        </ul>
                    </div>
                    
                    <p><strong>📌 In generale, si usano le tonalità che hanno meno accidenti (altro modo per dire alterazioni), perché sono più leggibili, più veloci da scrivere e meno faticose da interpretare.</strong></p>
                </div>

                <!-- TASTIERA LIVELLO 6 TEORIA - DOPPIA OTTAVA CON DO FINALE -->
                <div style="display: flex; flex-direction: column; align-items: center; margin: 35px 0; position: relative;">
                    <div style="position: relative; height: 220px; width: 810px; padding: 20px;">
                        <!-- Prima ottava -->
                        <div class="key white-key" style="left: 0px;" data-note="Do"></div>
                        <div class="key white-key" style="left: 50px;" data-note="Re"></div>
                        <div class="key white-key" style="left: 100px;" data-note="Mi"></div>
                        <div class="key white-key" style="left: 150px;" data-note="Fa"></div>
                        <div class="key white-key" style="left: 200px;" data-note="Sol"></div>
                        <div class="key white-key" style="left: 250px;" data-note="La"></div>
                        <div class="key white-key" style="left: 300px;" data-note="Si"></div>
                        
                        <div class="key black-key" style="left: 32px;" data-note="Do#"></div>
                        <div class="key black-key" style="left: 82px;" data-note="Re#"></div>
                        <div class="key black-key" style="left: 182px;" data-note="Fa#"></div>
                        <div class="key black-key" style="left: 232px;" data-note="Sol#"></div>
                        <div class="key black-key" style="left: 282px;" data-note="La#"></div>
                        
                        <!-- Seconda ottava -->
                        <div class="key white-key" style="left: 350px;" data-note="Do2"></div>
                        <div class="key white-key" style="left: 400px;" data-note="Re2"></div>
                        <div class="key white-key" style="left: 450px;" data-note="Mi2"></div>
                        <div class="key white-key" style="left: 500px;" data-note="Fa2"></div>
                        <div class="key white-key" style="left: 550px;" data-note="Sol2"></div>
                        <div class="key white-key" style="left: 600px;" data-note="La2"></div>
                        <div class="key white-key" style="left: 650px;" data-note="Si2"></div>
                        
                        <div class="key black-key" style="left: 382px;" data-note="Do#2"></div>
                        <div class="key black-key" style="left: 432px;" data-note="Re#2"></div>
                        <div class="key black-key" style="left: 532px;" data-note="Fa#2"></div>
                        <div class="key black-key" style="left: 582px;" data-note="Sol#2"></div>
                        <div class="key black-key" style="left: 632px;" data-note="La#2"></div>
                        
                        <!-- Do finale (terza ottava) -->
                        <div class="key white-key" style="left: 700px;" data-note="Do3"></div>
                    </div>
                </div>
            </div>

            <!-- LIVELLO 6 - PRATICA -->
            <div id="level-6-practice" class="section">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 class="section-title">Pratica: Riconosci le tonalità enarmoniche</h2>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label class="selector-label">Numero di domande:</label>
                        <select id="question-count-6" class="selector" style="min-width: 100px;">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                        </select>
                    </div>
                </div>
                
                <div class="exercise-card">
                    <button class="btn" id="new-exercise-6">Gioca</button>
                    
                    <div id="question-6" style="margin: 20px 0; font-size: 18px; font-weight: bold; color: #e5e7eb;">Clicca "Gioca" per iniziare!</div>
                    
                    <div style="margin: 20px 0;">
                        <label class="selector-label">Modalità di gioco:</label>
                        <select id="game-mode-6" class="selector" style="min-width: 150px;">
                                                    <option value="complex-to-simple">Modalità A: Complessa → semplice</option>
                        <option value="simple-to-complex">Modalità B: Semplice → complessa</option>
                        </select>
                    </div>
                    
                    <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong>Modalità A:</strong> Data una tonalità complessa, trova la sua forma enarmonica più semplice<br>
                        <strong>Modalità B:</strong> Data una tonalità semplice, trova la sua forma enarmonica complessa<br>
                        <small>Es. "Do♭ maggiore" → "Si maggiore" oppure "Si maggiore" → "Do♭ maggiore"</small>
                    </div>
                    
                    <div id="tonality-info-6" style="background: #334155; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; display: none;">
                        <div id="tonality-display-6" style="font-size: 1.2em; color: #3b82f6; margin-bottom: 10px;"></div>
                        <div id="alterations-display-6" style="color: #e2e8f0;"></div>
                    </div>
                    
                    <!-- Pulsanti per le risposte -->
                    <div id="answer-buttons-6" style="display: none;">
                        <!-- I pulsanti vengono generati dinamicamente in base alla modalità -->
                    </div>
                    
                    <div id="feedback-6" class="feedback"></div>
                </div>
            </div>
        </div>
        
        <!-- FOOTER CON LOGO -->
        <div class="footer" style="background: rgba(51, 65, 85, 0.8); backdrop-filter: blur(10px); padding: 30px; text-align: center; border-top: 1px solid rgba(71, 85, 105, 0.3);">
            <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
                <div style="text-align: center;">
                    <img src="Lettering sip bianco.png" alt="Logo SIP" style="max-height: 60px; width: auto;">
                    <p style="margin-top: 15px; color: #cbd5e1; font-size: 14px; opacity: 0.8;">© 2025 SIP - Tutti i diritti riservati</p>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
